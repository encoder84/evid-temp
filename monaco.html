<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <style>
        html,
        body {
            height: 100%;
            width: 100%;
            margin: 0;
            overflow: hidden;
            background: #0A0A0A;
        }

        #container {
            width: 100%;
            height: 100%;
        }

        /* FORCE OVERRIDE: This makes sure the background is black no matter what */
        .monaco-editor, 
        .monaco-editor-background,
        .monaco-editor .margin {
            background-color: #0A0A0A !important; 
        }
    </style>
</head>

<body>
    <div id="container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
    <script>
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs' } });

        require(['vs/editor/editor.main'], function () {

            monaco.editor.defineTheme('potassium-fixed', {
                base: 'vs-dark',
                inherit: true,
                rules: [
                    { token: 'keyword', foreground: 'C678DD' },
                    { token: 'keyword.control', foreground: 'C678DD' },
                    { token: 'function', foreground: '61AFEF' },
                    { token: 'function.call', foreground: '61AFEF' },
                    { token: 'support.function', foreground: '61AFEF' },
                    { token: 'method', foreground: '61AFEF' },
                    { token: 'string', foreground: '98C379' },
                    { token: 'number', foreground: 'D19A66' },
                    { token: 'type', foreground: '56B6C2' },
                    { token: 'global', foreground: '56B6C2' },
                    { token: 'variable.predefined', foreground: '56B6C2' },
                    { token: 'identifier', foreground: 'ABB2BF' },
                    { token: 'variable', foreground: 'ABB2BF' },
                    { token: 'delimiter', foreground: 'ABB2BF' },
                    { token: 'operator', foreground: 'ABB2BF' }
                ],
                colors: {
                    'editor.background': '#0A0A0A', 
                    'editor.foreground': '#ABB2BF',
                    
                    // THIS IS THE KEY FIX:
                    'editorGutter.background': '#0A0A0A', 

                    'editorLineNumber.foreground': '#4B5263',
                    'editor.lineHighlightBackground': '#2C313A',
                    'editorCursor.foreground': '#528BFF',
                    'editor.selectionBackground': '#3E4451',
                    'scrollbarSlider.background': '#4E4E4E50',
                }
            });

            const code = `print("Welcome to evide")`;

            window.editor = monaco.editor.create(document.getElementById('container'), {
                value: code,
                language: 'lua',
                theme: 'potassium-fixed',
                fontSize: 14,
                fontFamily: 'Consolas, "Courier New", monospace',
                minimap: { enabled: false },
                automaticLayout: true,
                lineNumbersMinChars: 4,
                scrollBeyondLastLine: false,
                contextmenu: true
            });
        });

        function GetText() { return window.editor.getValue(); }
        function SetText(text) { window.editor.setValue(text); }
    </script>
</body>

</html>